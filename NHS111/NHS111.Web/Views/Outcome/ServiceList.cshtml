@using NHS111.Models.Models.Web
@using NHS111.Models.Models.Web.FromExternalServices
@model OutcomeViewModel

@{
    Layout = "~/Views/Shared/_LayoutNhsUk.cshtml";
}

@section Title {
    Select a service
}

@section OuterSection {

}

@section FeedbackSection {
    @Html.Partial("_FeedbackDetails", new FeedbackViewModel() { PageId = @Model.Id })
}

<link href="~/content/css_NhsUk/servicelist.css" media="screen" rel="stylesheet" type="text/css" />
<link href="~/content/css_NhsUk/service.css" media="screen" rel="stylesheet" type="text/css" />

<section>
    <div class="section-item">
        <h3 class="section-header">
            Recommended service
        </h3>
        @{
            DosService selectedService = null;
            if (Model.DosCheckCapacitySummaryResult.Success != null)
            {
                selectedService = Model.DosCheckCapacitySummaryResult.Success.Services.FirstOrDefault();
            }
        }
        @if (selectedService != null)
        {
            <div class="service-list-content">
                @Html.Partial("_SelectedService", selectedService)
                <div class="form-item-wrapper">
                    <fieldset>
                        <div class="form-group">
                            @using (Html.BeginForm("PersonalDetails", "Outcome", FormMethod.Post))
                            {
                                @Html.Partial("_CommonHiddenFieldsOutcomeViewModel", Model)
                                @Html.Hidden("SelectedServiceId", @selectedService.Id)
                                <div class="row">
                                    <input class="button button-next" type="submit" name="PersonalDetails" value="Request a call back" />
                                </div>
                            }
                        </div>
                    </fieldset>
                </div>
            </div>
        }
    </div>
</section>

<section>
    <div class="section-item last">
        <h3 class="section-header">
            Other services near you
        </h3>
        @if (Model.DosCheckCapacitySummaryResult.Success != null)
        {
            foreach (var service in Model.DosCheckCapacitySummaryResult.Success.Services.Skip(1))
            {
                <div class="service-list-content">
                    @Html.Partial("_SelectedService", service)
                    <fieldset>
                        <div class="form-group">
                            @using (Html.BeginForm("PersonalDetails", "Outcome", FormMethod.Post))
                            {
                                @Html.Partial("_CommonHiddenFieldsOutcomeViewModel", Model)
                                @Html.Hidden("SelectedServiceId", service.Id)
                                <div class="row">
                                    <input class="button button-next button-link" type="submit" name="PersonalDetails" value="Request a call back"/>
                                </div>
                            }
                        </div>
                    </fieldset>

                </div>
            }
        }
    </div>
</section>
